<?php extend('../templates/main.html', ['title' => 'The TM ShuffleBoard Game']) ?>

<h1 class="mt-4 mb-4 md:mb-12 text-xl md:text-6xl text-center">ShuffleDuck</h1>

<div x-data="shuffleboard" class="m-auto w-1/2 max-w-screen-md relative">
    <div id="board" x-ref="board" class="border mb-20 relative">
        <template x-for="(item, index) in boardItems" :key="index">
            <div class="w-full h-10 leading-10 border-b last:border-b-0 text-center font-bold text-xl"
                :class="{'bg-green-500': index === duckItemPos}" x-text="item.name">
            </div>
        </template>
        <div id="duck" x-ref="duck" class="w-8 h-8 absolute text-2xl text-center"
            style="transform: translateY(-100%); top: 0; left: 10px;">üê•</div>

    </div>

    <div id="controls-container" class="fixed bottom-0 left-0 pt-2 w-full bg-white border-t-2">
        <div id="controls" class="px-4 md:w-1/2 max-w-screen-md mx-auto">
            <div class="mb-1 flex flex-col items-center">
                <div id="strengthBarContainer" class="w-60 md:w-2/3  h-3 border mb-2">
                    <div x-ref="strengthBar" style="width: 0" class="h-full bg-green-500"></div>
                </div>
            </div>
            <div class="mb-2 flex justify-between items-center">
                <div class="w-1/3 text-center border py-2" :class="player === 0 && 'bg-yellow-200'">
                    <h2 class="text-sm">Player 1</h2>
                    <p class="font-bold text-lg" x-text="scores[0]"></p>
                </div>

                <button class="w-14 h-14 mb-2 -bottom-5 bg-red-600 rounded-full shadow-md shadow-black"
                    disabled="scoreToShow" @mouseDown.prevent="startAddStrength" @touchStart.prevent="startAddStrength"
                    @mouseUp.prevent="stopAddStrength" @touchEnd.prevent="stopAddStrength" @mouseleave="clearStrength">
                </button>

                <div class="w-1/3 text-center border py-2" :class="player === 1 && 'bg-yellow-200'">
                    <h2 class="text-sm">Player 2</h2>
                    <p class="font-bold text-lg" x-text="scores[1]"></p>
                </div>

            </div>
        </div>
    </div>

    <div id="scoreJumbotron"
        class="fixed inset-0 w-screen h-screen flex items-center justify-center bg-white bg-opacity-70"
        x-show="scoreToShow">
        <span x-text="scoreToShow" class="text-9xl font-bold" x-transition:enter.duration.1000ms.opacity.30.scale.50
            x-show="scoreToShow"></span>
    </div>
</div>

<?php endExtend(); ?>
